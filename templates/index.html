<!-- Dentro do <body> -->
<div class="container">
  <h2>Gerador de Pins</h2>

  <!-- Bot√£o de conex√£o com o Pinterest -->
  <button style="margin-bottom: 1rem; background-color: #0073e6;" onclick="conectarComPinterest()">
    üîó Conectar ao Pinterest
  </button>

  <input type="text" id="titulo" placeholder="T√≠tulo do produto">
  <textarea id="descricao" rows="3" placeholder="Descri√ß√£o do produto"></textarea>
  <input type="text" id="palavrasChave" placeholder="Palavras-chave (separadas por v√≠rgulas)">
  <input type="text" id="linkAfiliado" placeholder="Link de afiliado da Shopee">
  <input type="text" id="imagemUrl" placeholder="URL da imagem do produto">
  <input type="file" id="imagemArquivo" accept="image/*">
  <button onclick="mostrarPrevia()">Gerar Pr√©via</button>

  <div class="preview" id="preview" style="display:none;">
    <h3>Pr√©via do Pin</h3>
    <img id="previewImg" src="" alt="Pr√©via do produto">
    <p><strong>T√≠tulo:</strong> <span id="previewTitulo"></span></p>
    <p><strong>Descri√ß√£o:</strong> <span id="previewDescricao"></span></p>
    <p><strong>Palavras-chave:</strong> <span id="previewPalavras"></span></p>
    <p><strong>Link de afiliado:</strong> <a id="previewLink" href="#" target="_blank">Ver Produto</a></p>
  </div>

  <button style="margin-top: 1rem; background-color: #e60023;" onclick="publicarNoPinterest()">üìå Publicar no Pinterest</button>
</div>

<script>
  const CLIENT_ID = "SEU_CLIENT_ID_DO_PINTEREST";
  const REDIRECT_URI = "https://SEUSITE.com/auth/pinterest/callback"; // Altere para seu dom√≠nio
  const SCOPES = "pins:read,pins:write,boards:read,boards:write,user_accounts:read";

  function conectarComPinterest() {
    const authUrl = `https://www.pinterest.com/oauth/?response_type=code&client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&scope=${encodeURIComponent(SCOPES)}&state=1234`;
    window.location.href = authUrl;
  }

  function mostrarPrevia() {
    const titulo = document.getElementById('titulo').value;
    const descricao = document.getElementById('descricao').value;
    const palavras = document.getElementById('palavrasChave').value;
    const link = document.getElementById('linkAfiliado').value;
    const imagemArquivo = document.getElementById('imagemArquivo').files[0];
    const imagemUrl = document.getElementById('imagemUrl').value;

    const imgPreview = document.getElementById('previewImg');
    if (imagemArquivo) {
      const reader = new FileReader();
      reader.onload = function (e) {
        imgPreview.src = e.target.result;
      };
      reader.readAsDataURL(imagemArquivo);
    } else {
      imgPreview.src = imagemUrl;
    }

    document.getElementById('previewTitulo').textContent = titulo;
    document.getElementById('previewDescricao').textContent = descricao;
    document.getElementById('previewPalavras').textContent = palavras;
    document.getElementById('previewLink').href = link;

    document.getElementById('preview').style.display = 'block';
  }

  async function publicarNoPinterest() {
    const titulo = document.getElementById('titulo').value;
    const descricao = document.getElementById('descricao').value;
    const link = document.getElementById('linkAfiliado').value;
    const imagemUrl = document.getElementById('previewImg').src;

    const token = "SEU_TOKEN_DE_ACESSO"; // Vai vir depois do fluxo OAuth
    const boardId = "SEU_BOARD_ID";

    const pinData = {
      title: titulo,
      description: descricao,
      link: link,
      image_url: imagemUrl,
      board_id: boardId,
      alt_text: "Imagem do produto"
    };

    try {
      const response = await fetch("https://api.pinterest.com/v5/pins", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${token}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify(pinData)
      });

      if (response.ok) {
        alert("‚úÖ Pin publicado com sucesso!");
      } else {
        const erro = await response.json();
        console.error(erro);
        alert("‚ùå Falha ao publicar o Pin.");
      }
    } catch (error) {
      console.error(error);
      alert("‚ùå Erro ao se conectar com a API do Pinterest.");
    }
  }
</script>

